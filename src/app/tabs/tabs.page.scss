:host {
  display: flex;
  flex-direction: column;
  height: 100%;
}

// Basic tab styles with performance optimization
ion-tabs {
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
}

ion-tab-button {
  position: relative;
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1),
    color 0.2s ease-out;
  will-change: transform;

  ion-icon {
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    will-change: transform;
  }

  ion-label {
    transition: opacity 0.2s ease-out;
  }

  &.tab-selected {
    ion-icon {
      transform: scale(1.15);
      animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
  }

  &:active {
    transform: scale(0.95);
  }
}

// Pop-in animation for selected tabs
@keyframes popIn {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.25);
  }
  100% {
    transform: scale(1.15);
    opacity: 1;
  }
}

// Slide animations for page transitions
@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

@keyframes slideOutLeft {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(-100%);
    opacity: 0;
  }
}

// Page transition animations scoped into shadow DOM
:host ::ng-deep ion-router-outlet {
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform-origin: center;
  position: relative;
  display: block;
  flex: 1 1 auto;
  height: 100%;
}

:host ::ng-deep ion-router-outlet.slide-in-right > * {
  animation: slideInRight 0.1s cubic-bezier(0.4, 0, 0.2, 1) both;
}

:host ::ng-deep ion-router-outlet.slide-in-left > * {
  animation: slideInLeft 0.1s cubic-bezier(0.4, 0, 0.2, 1) both;
}

:host ::ng-deep ion-router-outlet.slide-out-right > * {
  animation: slideOutRight 0.1s cubic-bezier(0.4, 0, 0.2, 1) both;
}

:host ::ng-deep ion-router-outlet.slide-out-left > * {
  animation: slideOutLeft 0.1s cubic-bezier(0.4, 0, 0.2, 1) both;
}

// Card shuffle keyframes
@keyframes cardExitForward {
  0% {
    transform: translateX(0) rotate(0deg) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateX(-60px) rotate(-10deg) scale(0.9);
    opacity: 0;
  }
}

@keyframes cardExitBackward {
  0% {
    transform: translateX(0) rotate(0deg) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateX(60px) rotate(10deg) scale(0.9);
    opacity: 0;
  }
}

@keyframes cardEnterForward {
  0% {
    transform: translateX(60px) rotate(6deg) scale(0.92);
    opacity: 0;
  }
  60% {
    transform: translateX(-12px) rotate(-2deg) scale(0.98);
    opacity: 1;
  }
  100% {
    transform: translateX(0) rotate(0deg) scale(1);
  }
}

@keyframes cardEnterBackward {
  0% {
    transform: translateX(-60px) rotate(-6deg) scale(0.92);
    opacity: 0;
  }
  60% {
    transform: translateX(12px) rotate(2deg) scale(0.98);
    opacity: 1;
  }
  100% {
    transform: translateX(0) rotate(0deg) scale(1);
  }
}

:host ::ng-deep ion-router-outlet.card-exit-forward > * {
  animation: cardExitForward 0.28s cubic-bezier(0.22, 0.61, 0.36, 1) both;
}

:host ::ng-deep ion-router-outlet.card-exit-backward > * {
  animation: cardExitBackward 0.28s cubic-bezier(0.22, 0.61, 0.36, 1) both;
}

:host ::ng-deep ion-router-outlet.card-enter-forward > * {
  animation: cardEnterForward 0.32s cubic-bezier(0.38, 0.8, 0.32, 1) both;
}

:host ::ng-deep ion-router-outlet.card-enter-backward > * {
  animation: cardEnterBackward 0.32s cubic-bezier(0.38, 0.8, 0.32, 1) both;
}

// Ripple effect on tap
ion-tab-button::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.3) 0%,
    transparent 70%
  );
  transform: translate(-50%, -50%) scale(0);
  pointer-events: none;
}

ion-tab-button:active::after {
  animation: ripple 0.6s ease-out;
}

@keyframes ripple {
  from {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  to {
    transform: translate(-50%, -50%) scale(4);
    opacity: 0;
  }
}

// Tab bar styling
ion-tab-bar {
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.08);
  flex-shrink: 0;
}

// Content fade animation
ion-content {
  animation: fadeIn 0.25s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0.8;
  }
  to {
    opacity: 1;
  }
}
